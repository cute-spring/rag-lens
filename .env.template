# RAG Pipeline Testing Tool - Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# API ENABLEMENT FLAGS - Enable/disable specific API integrations
# =============================================================================

# Document Retrieval API
ENABLE_RETRIEVAL_API=true
RETRIEVAL_PROVIDER=openai  # Options: openai, azure, custom, simulation

# Reranking API
ENABLE_RERANKING_API=true
RERANKING_PROVIDER=cross-encoder  # Options: cross-encoder, openai, azure, custom

# Sub-segment Extraction API
ENABLE_EXTRACTION_API=true
EXTRACTION_PROVIDER=openai  # Options: openai, azure, custom, simulation

# Context Assembly API
ENABLE_CONTEXT_API=false  # Most users can use built-in context assembly
CONTEXT_PROVIDER=built-in  # Options: built-in, custom

# LLM Generation API
ENABLE_LLM_API=true
LLM_PROVIDER=openai  # Options: openai, azure, anthropic, local

# Results Analysis API
ENABLE_ANALYSIS_API=true
ANALYSIS_PROVIDER=built-in  # Options: built-in, custom

# Test Case Management API
ENABLE_TESTCASE_API=false  # Set to true to use external test case management
TESTCASE_PROVIDER=local  # Options: local, bigquery, custom_api

# =============================================================================
# AUTHENTICATION - API Keys and Credentials
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ORG_ID=your_openai_org_id_here  # Optional
OPENAI_BASE_URL=https://api.openai.com/v1

# Azure OpenAI Configuration
AZURE_OPENAI_API_KEY=your_azure_openai_key_here
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_DEPLOYMENT_NAME=your_deployment_name

# Anthropic Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_BASE_URL=https://api.anthropic.com

# Custom API Configurations
RETRIEVAL_API_KEY=your_retrieval_api_key_here
RERANKING_API_KEY=your_reranking_api_key_here
EXTRACTION_API_KEY=your_extraction_api_key_here
CUSTOM_LLM_API_KEY=your_custom_llm_api_key_here

# =============================================================================
# API ENDPOINTS - Custom API URLs (if using custom providers)
# =============================================================================

# Document Retrieval API
RETRIEVAL_API_URL=https://api.retrieval-service.com
RETRIEVAL_API_TIMEOUT=30
RETRIEVAL_MAX_RETRIES=3

# Reranking API
RERANKING_API_URL=https://api.reranking-service.com
RERANKING_API_TIMEOUT=15
RERANKING_MAX_RETRIES=3

# Sub-segment Extraction API
EXTRACTION_API_URL=https://api.extraction-service.com
EXTRACTION_API_TIMEOUT=45
EXTRACTION_MAX_RETRIES=3

# Custom LLM API
CUSTOM_LLM_API_URL=https://api.llm-service.com
CUSTOM_LLM_API_TIMEOUT=60
CUSTOM_LLM_MAX_RETRIES=2

# Test Case Management API
TESTCASE_API_URL=https://api.testcase-service.com
TESTCASE_API_TIMEOUT=30
TESTCASE_MAX_RETRIES=3

# =============================================================================
# MODEL CONFIGURATIONS
# =============================================================================

# LLM Models
LLM_MODEL=gpt-4
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=1000
LLM_TOP_P=1.0
LLM_FREQUENCY_PENALTY=0.0
LLM_PRESENCE_PENALTY=0.0

# Reranking Model
RERANKING_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANKING_THRESHOLD=0.5

# Ollama Configuration (for local re-ranking)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=qllama/bge-reranker-v2-m3:latest
OLLAMA_API_KEY=

# Extraction Model
EXTRACTION_MODEL=gpt-3.5-turbo
EXTRACTION_TEMPERATURE=0.3
EXTRACTION_MAX_SEGMENTS=10

# =============================================================================
# PIPELINE PARAMETERS - Default pipeline behavior
# =============================================================================

# Weights for reranking (must sum to 1.0)
SEMANTIC_WEIGHT=0.5
FRESHNESS_WEIGHT=0.2
QUALITY_WEIGHT=0.3

# Filtering and selection
RELEVANCE_THRESHOLD=0.6
TOP_N_CHUNKS=10
MAX_CONTEXT_LENGTH=4000

# Analysis Configuration
ENABLE_CONTEXT_RELEVANCE=true
ENABLE_RESPONSE_QUALITY=true
ENABLE_PERFORMANCE_ANALYSIS=true
GENERATE_INSIGHTS=true
GENERATE_SUGGESTIONS=true

# =============================================================================
# RATE LIMITING AND TIMEOUTS
# =============================================================================

# Rate limits (requests per minute)
OPENAI_RATE_LIMIT=60
ANTHROPIC_RATE_LIMIT=30
CUSTOM_API_RATE_LIMIT=100

# Timeouts (seconds)
DEFAULT_API_TIMEOUT=30
LLM_TIMEOUT=60
ANALYSIS_TIMEOUT=45

# Retry configuration
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0
RETRY_JITTER=true

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Enable API response caching
ENABLE_CACHE=true
CACHE_TTL=300  # 5 minutes
CACHE_MAX_SIZE=1000

# Redis configuration (for distributed caching)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# Local file cache (fallback)
LOCAL_CACHE_DIR=./cache
LOCAL_CACHE_MAX_SIZE=100MB

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Log levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Enable detailed API logging
ENABLE_API_LOGGING=true
LOG_REQUEST_HEADERS=false
LOG_RESPONSE_HEADERS=false
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=8090
METRICS_PATH=/metrics

# Error tracking
ERROR_REPORTING=true
SENTRY_DSN=your_sentry_dsn_here

# =============================================================================
# TESTING AND DEVELOPMENT
# =============================================================================

# Enable simulation mode for testing
ENABLE_SIMULATION_MODE=false
SIMULATION_RESPONSE_TIME=1.0

# Test data configuration
USE_SAMPLE_DATA=true
SAMPLE_DATA_PATH=./data/sample_test_cases.json

# Debug mode
DEBUG_MODE=false
ENABLE_PROFILING=false
ENABLE_REQUEST_TRACING=false

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS configuration
ALLOWED_ORIGINS=http://localhost:8501,http://localhost:3000
ALLOWED_METHODS=GET,POST,PUT,DELETE
ALLOWED_HEADERS=Content-Type,Authorization

# Rate limiting per user
RATE_LIMIT_PER_USER=100
RATE_LIMIT_WINDOW=60

# API key validation
STRICT_API_KEY_VALIDATION=true
API_KEY_HEADER=X-API-Key

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Local storage
DATA_DIR=./data
CACHE_DIR=./cache
LOGS_DIR=./logs

# Database configuration (if using external test case management)
DATABASE_URL=postgresql://user:password@localhost:5432/rag_pipeline
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# BigQuery configuration (for test case management)
BIGQUERY_PROJECT_ID=your-project-id
BIGQUERY_DATASET_ID=rag_test_cases
BIGQUERY_LOCATION=US

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Connection pooling
ENABLE_CONNECTION_POOLING=true
MAX_POOL_SIZE=20
POOL_TIMEOUT=30

# Request batching
ENABLE_REQUEST_BATCHING=true
BATCH_SIZE=10
BATCH_TIMEOUT=5.0

# Async configuration
ENABLE_ASYNC=true
MAX_CONCURRENT_REQUESTS=50

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Application settings
HOST=0.0.0.0
PORT=8501
WORKERS=4

# SSL/TLS configuration
ENABLE_SSL=false
SSL_CERT_PATH=./certs/cert.pem
SSL_KEY_PATH=./certs/key.pem

# Health check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental features
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_BETA_FEATURES=false

# UI features
ENABLE_DARK_MODE=true
ENABLE_ADVANCED_METRICS=true
ENABLE_EXPORT_RESULTS=true
ENABLE_REAL_TIME_MONITORING=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Analytics tracking
ENABLE_ANALYTICS=false
ANALYTICS_ID=your_analytics_id

# External monitoring
ENABLE_EXTERNAL_MONITORING=false
MONITORING_SERVICE_URL=https://monitoring.service.com
MONITORING_API_KEY=your_monitoring_key

# Webhook configuration (for pipeline events)
ENABLE_WEBHOOKS=false
WEBHOOK_URL=https://your-webhook-endpoint.com/events
WEBHOOK_SECRET=your_webhook_secret

# =============================================================================
# VALIDATION AND ERROR HANDLING
# =============================================================================

# Request validation
STRICT_REQUEST_VALIDATION=true
ENABLE_REQUEST_SANITIZATION=true

# Response validation
ENABLE_RESPONSE_VALIDATION=true
STRICT_RESPONSE_VALIDATION=false

# Error handling
ENABLE_GRACEFUL_DEGRADATION=true
ENABLE_CIRCUIT_BREAKER=true
CIRCUIT_BREAKER_THRESHOLD=5

# =============================================================================
# MIGRATION CONFIGURATION
# =============================================================================

# Migration mode: simulation, hybrid, full_api
MIGRATION_MODE=simulation

# API fallback configuration
ENABLE_API_FALLBACK=true
FALLBACK_TO_SIMULATION=true

# Data migration
MIGRATE_EXISTING_DATA=false
MIGRATION_BATCH_SIZE=100

# =============================================================================
# END OF TEMPLATE
# =============================================================================

# Instructions:
# 1. Copy this file to .env
# 2. Replace placeholder values with your actual API keys and configurations
# 3. Uncomment and set only the values you need
# 4. Remove or comment out unused configurations
# 5. Never commit .env to version control
# 6. Use .env.example for committed example configurations

# Validation:
# Run python validate_env.py to check your configuration
# Run python test_env.py to test API connectivity